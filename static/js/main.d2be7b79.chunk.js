(window.webpackJsonpvisualizacion_datos_gov_co=window.webpackJsonpvisualizacion_datos_gov_co||[]).push([[0],{14:function(e,t,a){e.exports=a(30)},19:function(e,t,a){},20:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),o=a(11),c=a.n(o),s=(a(19),a(20),a(3)),i=a(4),l=a(6),u=a(5),d=a(7),m=a(8),p=a.n(m),b=a(9),h=a(12),v=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.submit=function(e){e.preventDefault(),a.props.onSubmit(a.state.url)},a.state={url:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("form",{className:"text-center m-auto py-4",style:{maxWidth:700}},n.a.createElement("label",{htmlFor:"url-input",style:{fontSize:"1.2em"}},"Url o Identificador del Recurso"),n.a.createElement("input",{type:"text",id:"url-input",className:"form-control m-auto",value:this.state.url,name:"url",onChange:this.onChange,"aria-describedby":"url-input-help",style:{maxWidth:500}}),n.a.createElement("p",{className:"pt-2"},"La url debe tener el formato datos.gov.co/resource/$id (https://www.datos.gov.co/resource/hp9r-jxuu.json) o puedes pasar \xfanicamente el identificador del recurso. Por ejemplo, 'hp9r-jxuu'."),n.a.createElement("button",{className:"btn btn-primary",onClick:this.submit},"Cargar"))}}]),t}(r.Component),f=a(13),x=a.n(f),w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).setElem=function(e){e&&(a.navioInstance=x()(e,600))},a.state={navio:null},a.navioInstance=null,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidUpdate",value:function(){this.props.data&&this.navioInstance&&(this.navioInstance.data(this.props.data),this.navioInstance.addAllAttribs())}},{key:"render",value:function(){var e=!(this.props.error||this.props.loading);return n.a.createElement("div",null,this.props.error?this.props.error:this.props.loading?"Cargando...":"",n.a.createElement("div",{id:"navio",style:{display:e?"":"none"},ref:this.setElem}))}}]),t}(r.Component);function E(e){e.loading;var t=e.error,a=e.metadata;if(t||!a)return!1;var r=a.name,o=a.category,c=(a.description,a.webUri),s=a.license;return n.a.createElement("table",{className:"table table-striped m-auto pt-3",style:{maxWidth:700}},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"Nombre"),n.a.createElement("td",{scope:"col-auto"},r)),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"Categor\xeda"),n.a.createElement("td",null,o)),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"Recurso Web"),n.a.createElement("td",null,n.a.createElement("a",{href:c},c))),n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},"Licencia"),n.a.createElement("td",null,s))))}var g=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,r,n,o,c,s,i,l,u,d;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],r=[0],n=0;case 3:if(!(n<1&&r.length>0)){e.next=33;break}return e.next=6,fetch("https://www.datos.gov.co/resource/".concat(t,".json?$limit=1000&$offset=").concat(1e3*n));case 6:return o=e.sent,console.log(o),e.next=10,o.json();case 10:for(r=e.sent,c=!0,s=!1,i=void 0,e.prev=14,l=r[Symbol.iterator]();!(c=(u=l.next()).done);c=!0)d=u.value,a.push(d);e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,i=e.t0;case 22:e.prev=22,e.prev=23,c||null==l.return||l.return();case 25:if(e.prev=25,!s){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:n+=1,e.next=3;break;case 33:return e.abrupt("return",a);case 34:case"end":return e.stop()}}),e,null,[[14,18,22,30],[23,,25,29]])})));return function(t){return e.apply(this,arguments)}}(),k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={loading:!1,data:null,error:null},a.errorDeFormato=function(){a.setState({error:"La url debe tener el formato 'datos.gov.co/resource/{identificador}' o puedes pasar \xfanicamente el identificador del recurso '{identificador}'."})},a.onSubmit=function(){var e=Object(b.a)(p.a.mark((function e(t){var r,n,o,c,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!window.navigator.onLine){e.next=50;break}if(a.setState({error:null,loading:!0,metadata:null,data:null}),e.prev=4,!(t=t.toLowerCase()).includes("datos.gov.co/resource/")){e.next=19;break}if(2!=(n=t.split("datos.gov.co/resource/")).length){e.next=16;break}if(!n[1]){e.next=13;break}r=n[1].replace(".json",""),e.next=14;break;case 13:return e.abrupt("return",a.errorDeFormato());case 14:e.next=17;break;case 16:return e.abrupt("return",a.errorDeFormato());case 17:e.next=20;break;case 19:r=t;case 20:return e.next=22,fetch("https://datos.gov.co/api/views/metadata/v1/".concat(r));case 22:if(!(o=e.sent).ok){e.next=34;break}return e.next=26,o.json();case 26:return c=e.sent,a.setState({metadata:c}),e.next=30,g(r);case 30:s=e.sent,a.setState({data:s,loading:!1,error:null}),e.next=43;break;case 34:if(404!==o.status){e.next=38;break}a.setState({error:"El recurso no existe, por favor revisa la url."}),e.next=43;break;case 38:if(500!==o.status){e.next=42;break}a.setState({error:"Hubo un error con el servidor, por favor intenta m\xe1s tarde."}),e.next=43;break;case 42:throw new Error;case 43:e.next=48;break;case 45:e.prev=45,e.t0=e.catch(4),a.setState({error:"Hubo un error en la petici\xf3n, por favor intenta m\xe1s tarde."});case 48:e.next=51;break;case 50:a.setState({error:"No tienes conexi\xf3n a internet, por favor intenta m\xe1s tarde."});case 51:case"end":return e.stop()}}),e,null,[[4,45]])})));return function(t){return e.apply(this,arguments)}}(),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.log(this.state),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col mt-3"},n.a.createElement("h2",null,"Visualizaci\xf3n datos.gov.co"),n.a.createElement(v,{onSubmit:this.onSubmit}),n.a.createElement(E,this.state),n.a.createElement(w,this.state)))}}]),t}(r.Component);var j=function(){return n.a.createElement("div",{className:"container-fluid"},n.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[14,1,2]]]);
//# sourceMappingURL=main.d2be7b79.chunk.js.map